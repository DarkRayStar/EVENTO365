{"ast":null,"code":"var _jsxFileName = \"D:\\\\SLIIT\\\\Y2 S2\\\\ITP\\\\ITP_DOWNLOADED\\\\itp_project-kdy-_2021_-wd02-main\\\\Evento365\\\\evento_frontend\\\\react-frontend\\\\src\\\\rentingComponent\\\\OrderDetailComponent.jsx\";\nimport React, { Component } from 'react';\nimport RentalItemService from '../rentingServices/RentalItemService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass OrderDetailComponent extends Component {\n  constructor(props) {\n    super(props);\n\n    this.confirm = e => {\n      //Redirect to isuru booking with total price\n      e.preventDefault();\n      let itemrent = {\n        bookingid: this.state.bookingid,\n        totalprice: this.state.Alltotal\n      };\n      console.log('itemrent => ' + JSON.stringify(itemrent));\n      var data = sessionStorage.getItem('bookingSession');\n      data = JSON.parse(data);\n      data.total = this.state.Alltotal;\n      sessionStorage.setItem('bookingSession', JSON.stringify(data));\n      this.props.history.push('/add-bookings/_price');\n      RentalItemService.createRentHistory(itemrent).then(res => {});\n    };\n\n    this.state = {\n      temporaryitems: [],\n      bookingid: 2,\n      Alltotal: 0\n    };\n    this.deleteTemporaryitem = this.deleteTemporaryitem.bind(this);\n    this.confirm = this.confirm.bind(this);\n    this.addMore = this.addMore.bind(this);\n  }\n\n  deleteTemporaryitem(rentalid) {\n    if (window.confirm('Are you sure, want to remove?')) {\n      RentalItemService.deleteTemporaryitem(rentalid).then(res => {\n        this.setState({\n          temporaryitems: this.state.temporaryitems.filter(temporaryitem => temporaryitem.rentalid !== rentalid)\n        });\n      });\n    }\n  }\n\n  addMore() {\n    this.props.history.push('/test123');\n  }\n\n  componentDidMount() {\n    // RentalItemService.getTemporaryItems().then((res) => {\n    //     this.setState({ temporaryitems: res.data});\n    //     this.calculate(res.data);\n    // });\n    RentalItemService.retrieveItems(this.state.bookingid).then(res => {\n      this.setState({\n        temporaryitems: res.data\n      });\n      this.calculate(res.data);\n    });\n  }\n\n  calculate(data) {\n    var total = 0;\n    data.forEach(tp => {\n      total += tp.price;\n    });\n    this.state.Alltotal = total; //console.log(total,\"TOTAL\");\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        style: {\n          paddingTop: \"170px\",\n          paddingBottom: \"170px\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"center\", {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"formDiv\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-center\",\n              children: \" Order Details \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\",\n              children: /*#__PURE__*/_jsxDEV(\"table\", {\n                className: \"table  table-hover table bordered \",\n                children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                  children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                      children: \"Item Name\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 84,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: \"Quantity\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 85,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: \"Price\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 86,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: \"Actions\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 87,\n                      columnNumber: 33\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 83,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 82,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                  children: [this.state.temporaryitems.map(temporaryitem => /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      children: [\" \", temporaryitem.name]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 96,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: [\" \", temporaryitem.quantity]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 97,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: [\" \", temporaryitem.price]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 98,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: /*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: () => this.deleteTemporaryitem(temporaryitem.rentalid),\n                        className: \"btn btn-info\",\n                        children: \" Remove \"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 100,\n                        columnNumber: 45\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 99,\n                      columnNumber: 41\n                    }, this)]\n                  }, temporaryitem.rentalid, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 95,\n                    columnNumber: 37\n                  }, this)), /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      children: /*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: this.confirm,\n                        className: \"btn btn-danger\",\n                        children: \" Confirm \"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 107,\n                        columnNumber: 33\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 106,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: /*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: this.addMore,\n                        className: \"btn btn-info\",\n                        children: \" Add more \"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 110,\n                        columnNumber: 33\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 109,\n                      columnNumber: 33\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 105,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 91,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default OrderDetailComponent;","map":{"version":3,"sources":["D:/SLIIT/Y2 S2/ITP/ITP_DOWNLOADED/itp_project-kdy-_2021_-wd02-main/Evento365/evento_frontend/react-frontend/src/rentingComponent/OrderDetailComponent.jsx"],"names":["React","Component","RentalItemService","OrderDetailComponent","constructor","props","confirm","e","preventDefault","itemrent","bookingid","state","totalprice","Alltotal","console","log","JSON","stringify","data","sessionStorage","getItem","parse","total","setItem","history","push","createRentHistory","then","res","temporaryitems","deleteTemporaryitem","bind","addMore","rentalid","window","setState","filter","temporaryitem","componentDidMount","retrieveItems","calculate","forEach","tp","price","render","paddingTop","paddingBottom","map","name","quantity"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport RentalItemService from '../rentingServices/RentalItemService';\n\nclass OrderDetailComponent extends Component {\n    constructor(props){\n        super(props)\n\n        this.state = {\n            temporaryitems: [],\n            bookingid:2,\n            Alltotal:0\n        }\n        this.deleteTemporaryitem = this.deleteTemporaryitem.bind(this);\n        this.confirm = this.confirm.bind(this);\n        this.addMore = this.addMore.bind(this);\n    }\n\n    deleteTemporaryitem(rentalid){\n        if(window.confirm('Are you sure, want to remove?')) {\n            RentalItemService.deleteTemporaryitem(rentalid).then( res => {\n                this.setState({temporaryitems: this.state.temporaryitems.filter(temporaryitem => temporaryitem.rentalid !== rentalid)});\n            });\n        }\n    }\n\n    confirm= (e) =>{\n        //Redirect to isuru booking with total price\n        e.preventDefault();\n        let itemrent = {bookingid: this.state.bookingid, totalprice:this.state.Alltotal};\n        console.log('itemrent => ' + JSON.stringify(itemrent));\n        \n        var data = sessionStorage.getItem('bookingSession');\n        data = JSON.parse(data);\n\n        data.total = this.state.Alltotal;    \n        sessionStorage.setItem('bookingSession',JSON.stringify(data));\n\n        this.props.history.push('/add-bookings/_price');\n        RentalItemService.createRentHistory(itemrent).then(res => {\n            \n        });\n    }\n\n    addMore(){\n        this.props.history.push('/test123');\n    }\n\n    componentDidMount(){\n        // RentalItemService.getTemporaryItems().then((res) => {\n        //     this.setState({ temporaryitems: res.data});\n        //     this.calculate(res.data);\n        // });\n\n\n\n        RentalItemService.retrieveItems(this.state.bookingid).then((res) => {\n            this.setState({temporaryitems: res.data});\n            this.calculate(res.data);\n        })\n    }\n\n    calculate(data){\n        var total =0;\n        data.forEach(tp => {\n             total+=tp.price;\n        })\n            this.state.Alltotal =total;\n        //console.log(total,\"TOTAL\");\n    }\n\n    render() {\n        return (\n            <div>\n                <div className=\"row\" style={{paddingTop:\"170px\", paddingBottom:\"170px\"}}>\n                <center>\n                <div class=\"formDiv\" >\n                <h2 className=\"text-center\"> Order Details </h2>\n                <div className=\"row\">\n                </div>\n                <div className = \"row\">\n                    <table className = \"table  table-hover table bordered \">\n                        <thead>\n                            <tr> \n                                <th>Item Name</th>\n                                <th>Quantity</th>\n                                <th>Price</th>\n                                <th>Actions</th>\n                            </tr>\n                        </thead>\n\n                        <tbody>\n                            {\n                                this.state.temporaryitems.map(\n                                    temporaryitem =>\n                                    <tr key = {temporaryitem.rentalid}>\n                                        <td> {temporaryitem.name}</td>\n                                        <td> {temporaryitem.quantity}</td>\n                                        <td> {temporaryitem.price}</td>\n                                        <td>\n                                            <button onClick={ () => this.deleteTemporaryitem(temporaryitem.rentalid)} className=\"btn btn-info\"> Remove </button>\n                                        </td>                               \n                                    </tr>\n                                )\n                            }\n                            <tr>\n                                <td>\n                                <button onClick= {this.confirm} className=\"btn btn-danger\"> Confirm </button>\n                                </td>\n                                <td>\n                                <button onClick= {this.addMore} className=\"btn btn-info\"> Add more </button>\n                                </td>\n                            </tr>\n                        </tbody>\n                    </table>\n\n                </div>\n                </div>\n                </center>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default OrderDetailComponent;"]},"metadata":{},"sourceType":"module"}